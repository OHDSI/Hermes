<html>

<head>
	<title>HERMES</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" />
	<link rel="stylesheet" type="text/css" href="css/bootstrap-flat.min.css" />
	<link rel="stylesheet" type="text/css" href="css/bootstrap-flat-extras.min.css" />
	<link rel="stylesheet" type="text/css" href="css/jquery.dataTables.min.css" />

	<link rel="stylesheet" type="text/css" href="css/hermes.css" />

	<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/knockout-3.1.0.js"></script>
	<script type="text/javascript" src="js/knockout.dataTables.binding.js"></script>
	<script type="text/javascript" src="js/director.min.js"></script>
	<script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="js/jnj.facets.js"></script>
	<script type="text/javascript" src="js/jnj.facets.prompts.js"></script>
	<script type="text/javascript" src="js/config.js"></script>
	<script type="text/javascript" src="js/hermes.js"></script>
</head>

<body>
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<a class="navbar-brand" href="#">
				<img class="" src="images/logo.png">HERMES</a>
			<div class="navbar-right">
				<input id="querytext" class="navbar-input" type="text" placeholder="Search">
			</div>
		</div>
	</nav>

	<div id="welcomepanel" class="container">
		<div class="panel panel-default">
			<div class="panel-heading">Welcome to HERMES</div>
			<div class="panel-body">HERMES is the Health Entity Relationship and Metadata Exploration System (HERMES). HERMES is a web-based vocabulary browsing tool for OMOP CDM v5.
				<div id="searchhint" class="text-center">type anywhere and press enter to begin a new search</div>
			</div>
		</div>

	</div>

	<div id="conceptpanel" class="container" data-bind="if: current_concept">
		<div onclick="toggle_filters();" id="filter_control" class="toggle_control">Advanced Filters</div>
		<div id="conceptpanel_concept" data-bind="with: current_concept">
			<div class="conceptpanel_concept_name " data-bind="text:CONCEPT_NAME">
			</div>
			<div>
				<span class="conceptpanel_concept_details" data-bind="text:VOCABULARY_ID " title="Vocabulary"></span>
				<span class="conceptpanel_concept_details" data-bind="text:CONCEPT_CLASS_ID " title="Class"></span>
				<span class="conceptpanel_concept_details" data-bind="text:DOMAIN_ID " title="Domain"></span>
				<span class="conceptpanel_concept_details" data-bind="text:CONCEPT_ID " title="Concept Identifier"></span>
			</div>
		</div>
	</div>

	<div class="container">
		<div data-bind="if: prompts().length > 0">
			<div class="subcaption">Related Concept Filters</div>
			<div id="promptpanel" data-bind="foreach:prompts">
				<div class="promptpanel_prompt" data-bind="click:page_model.activate_prompt">
					<span class="glyphicon glyphicon-filter"></span>
					<span class="promptpanel_prompt_caption" data-bind="text:caption">
					</span>
				</div>
			</div>
		</div>
	</div>

	<div class="container">
		<div data-bind="if: fe_related">
			<div id="filterpanel" data-bind="with: fe_related">
				<div class="subcaption">Advanced Filters</div>
				<div id="filterpanel_container" class="row" data-bind="foreach:Facets">
					<div class="col-md-3">
						<div class="filterpanel_facet_name" data-bind="text:caption"></div>
						<div class="filterpanel_facet_members" data-bind="foreach:Members">
							<div class="filterpanel_facet_member">
								<span class="filterpanel_facet_member_name" data-bind="attr: {id: $parentContext.$index() + '-' + $index()}, click: function() { page_model.update_filters(); }, css : {selected: Selected}, text:Name + ' (' + ActiveCount + ')'"></span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="tablepanel" data-bind="if: fe_related">
			<div class="subcaption">Related Concept Listing</div>
			<table id="dt_related" class="stripe compact hover" cellspacing="0" width="100%" data-bind="dataTable:{
            data: page_model.fe_related().GetCurrentObjects(),
            options: {
												orderClasses: false,
												deferRender: true,
                        aoColumns: [
                            { sTitle: 'Related Concept', mData: 'CONCEPT_NAME', mRender: link_renderer},
                            { sTitle: 'Class', mData: 'CONCEPT_CLASS_ID' },
                            { sTitle: 'Domain', mData: 'DOMAIN_ID' },
														{ sTitle: 'Vocabulary', mData: 'VOCABULARY_ID' }
                        ]
                    }
        }">
			</table>
		</div>
	</div>

	<div id="searchpanel">
		<div id="searchpanel_searching">s e a r c h i n g . . .</div>
		<div id="searchpanel_error"></div>
		<div id="searchpanel_facets" data-bind="with:current_facet">
			<div id="searchpanel_facet" data-bind="foreach:Members.filter(function(m) {return m.ActiveCount > 0;})">
				<div class="searchpanel_facets_facet" data-bind="click:$root.add_filter">
					<div class="searchpanel_facet_hotkey" data-bind="text:$root.add_hotkey(Name)"></div>
					<div class=" searchpanel_facet_member">
						<div class="searchpanel_facet_member_name">
							<span data-bind="text:Name "></span>
							<span data-bind="text:'&nbsp;(' + ActiveCount + ')'"></span>
						</div>
						<div class="searchpanel_facet_percent " data-bind="style: { width : ((ActiveCount / fe_search.GetMaxMemberLength(current_facet_index)) * 100) + '%'}"></div>
					</div>
				</div>
			</div>
		</div>
		<div id="searchpanel_concept" data-bind="if:current_page_concepts().length > 0">
			<div id="paging_container">
				<div id="paging_info">
					Page <span data-bind="text: $root.current_page() + 1"></span> / <span data-bind="text: $root.total_pages"></span>
				</div>
				<div id="paging_controls">
					<span class="span_link" onclick="page_model.previous_page();">&lt;&lt; Previous</span>  <span class="span_link" onclick="page_model.next_page();">Next &gt;&gt;</span>
				</div>
			</div>
			<div id="searchpanel_results " data-bind="foreach:current_page_concepts ">
				<div class="searchpanel_concept " data-bind="click: $root.select_concept">
					<div class="searchpanel_concept_hotkey" data-bind="text: $root.add_concept_hotkey($index() + 1)">
					</div>
					<div class="searchpanel_concept_name ">
						<span data-bind="text:CONCEPT_NAME "></span>
					</div>
					<div>
						<span class="searchpanel_concept_facet_info" data-bind="text:VOCABULARY_ID "></span>
						<span class="searchpanel_concept_facet_info" data-bind="text:DOMAIN_ID "></span>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>

</html>
