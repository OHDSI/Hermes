<html>

<head>
	<title>HERMES</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css" />
	<link rel="stylesheet" type="text/css" href="css/bootstrap-flat.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/1.0.5/css/dataTables.responsive.css" />
	<link rel="stylesheet" type="text/css" href="css/jquery.dataTables.min.css" />
	<link rel="stylesheet" type="text/css" href="css/jquery.dataTables.colVis.css" />
	<link rel="stylesheet" type="text/css" href="css/hermes.dataTables.css" />
	<link rel="stylesheet" type="text/css" href="css/chart.css" />
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="css/update.css" />

	<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/knockout-3.1.0.js"></script>
	<script type="text/javascript" src="js/model.js"></script>
	<script type="text/javascript" src="js/lodash.min.js"></script>
	<script type="text/javascript" src="js/knockout.dataTables.binding.js"></script>
	<script type="text/javascript" src="js/knockout.lineChart.binding.js"></script>
	<script type="text/javascript" src="js/knockout.mapping.min.js"></script>
	<script type="text/javascript" src="js/director.min.js"></script>
	<script type="text/javascript" src="js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="js/jquery.dataTables.colVis.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/responsive/1.0.5/js/dataTables.responsive.js"></script>
	<script type="text/javascript" src="js/jnj.facets.js"></script>
	<script type="text/javascript" src="js/metatrix.js"></script>
	<script type="text/javascript" src="js/d3.min.js"></script>
	<script type="text/javascript" src="js/d3.tip.js"></script>
	<script type="text/javascript" src="js/jnj.chart.js"></script>
	<script type="text/javascript" src="js/config.js"></script>
	<script type="text/javascript" src="js/visualization.packinghiearchy.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/reporting.js"></script>
	<script type="text/javascript" src="js/colorbrewer.js"></script>
</head>

<body>
	<div id="wrapperLeftMenu">
		<div id="wrapperLogo"><img src="images/ohdsi.png">Hermes</div>
		<ul>
			<li>
				<a href="#/search"><i class="fa fa-search"></i>Vocabulary Search</a>
			</li>
			<ul data-bind="foreach:recentSearch">
				<li>
					<a data-bind="attr: {href:'#/search/' + query}, text: caption + ' (' + resultLength + ')'"></a>
				</li>
			</ul>
			<li>
				<a href="#"><i class="fa fa-history"></i>Recent Concepts</a>
			</li>
			<ul data-bind="foreach:recentConcept">
				<li>
					<a data-bind="text: CONCEPT_NAME, attr: { href: '#/concept/' + CONCEPT_ID}"></a>
				</li>
			</ul>
			<li data-bind="click: function() {currentView('conceptset'); document.location='#';}">
				<a href="#"><i class="fa fa-shopping-cart"></i>Concept Set</a>
				<span data-bind="if: pageModel.selectedConcepts().length > 0">
					<span class="badge" data-bind="text:pageModel.selectedConcepts().length"></span>
				</span>
			</li>
			<li data-bind="click: function() { currentView('import'); document.location='#' }">
				<a href="#"><i class="fa fa-upload"></i>Import</a>
			</li>

			<!--
			<li>
				<a href="#/cohortdefinitions"><i class="fa fa-language"></i>Cohort Definitions</a>
			</li>
			<li>
				<a href="#/reports"><i class="fa fa-area-chart"></i>Cohort Reporting</a>
			</li>
			<li>
				<a href="#/calculations"><i class="fa fa-calculator"></i>Advanced Calculations</a>
			</li>
			<li>
				<a href="#/jobs"><i class="fa fa-tasks"></i>Jobs</a>
			</li>
			-->

			<li>
				<a href="#/configure"><i class="fa fa-cogs"></i>Configure</a>
			</li>
		</ul>
	</div>
	<div id="wrapperMainWindow">
		<div id="wrapperMainWindowContainer">

			<div id="wrapperInitializing" data-bind="if: currentView() == 'initializing'">
				<div class="wrapperTitle">
					<i class="fa fa-refresh fa-spin"></i> Initializing...
				</div>
			</div>

			<div id="wrapperLoading" data-bind="if: currentView() == 'loading'">
				<div class="wrapperTitle">
					<i class="fa fa-refresh fa-spin"></i> Loading...
				</div>
			</div>

			<div data-bind="if: currentView() == 'jobs'">
				<div class="wrapperTitle">
					Jobs
				</div>
				<div id="wrapperJobs">
					<table width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
            data: pageModel.jobs(),
            options: {
						dom: 'Clfiprt',
						language: {
							search : 'Filter Jobs:'
						},
						colVis: {
							buttonText: 'Change Columns',
							align: 'right',
							overlayFade: 0,
							showAll: 'Show All Columns',
							restore: 'Reset Columns'
						},
						lengthMenu: [[25, 50, 100, -1], [25, 50, 100,'All']],
						orderClasses: false,
						deferRender: true,
						autoWidth: false,
						ordering: true,
						order: [[ 2, 'desc' ]],
						columns: [
								{ title: 'Job Name', data: 'jobParameters.jobName' },
								{ title: 'status', data: 'status'},
								{ title: 'Start Date', data: 'startDate'},
								{ title: 'End Date', data: 'endDate'}
						]
				}
        }">
					</table>
				</div>
			</div>

			<div data-bind="if: currentView() == 'reports'">
				<div class="wrapperTitle">
					<span data-bind="if:!pageModel.loadingReport()"><i class="fa fa-area-chart"></i></span>
					<span data-bind="if:pageModel.loadingReport()"><i class="fa fa-refresh fa-spin"></i></span> Cohort Reporting
				</div>

				<div class="reportControls pad-5">
					<select class="form-control" data-bind="css : { invalid: reportCohortDefinitionId()==undefined }, options:pageModel.cohortDefinitions, optionsText:'name', optionsValue:'id', optionsCaption:'Select a Cohort Definition', value:reportCohortDefinitionId"></select>
					<select class="form-control" data-bind="css : { invalid: reportReportName()==undefined }, options:pageModel.reports(), optionsCaption:'Select a Report', value:reportReportName"></select>
					<select class="form-control" data-bind="css : { invalid: reportSourceKey()==undefined }, options:pageModel.services()[0].sources.filter(hasResults), optionsValue:'sourceKey', optionsText:'sourceName', value:reportSourceKey, optionsCaption:'Select a Source'"></select>
					<input type="button" class="btn btn-default" onclick="runReport();" data-bind="enable: pageModel.reportValid(), value: pageModel.loadingReport() ? 'Loading...' : 'Run Report'">
				</div>

				<div id="reportPerson" data-bind="if: currentReport() == 'Person' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Person Report</div>
						<div class="reportSectionHeading">Year of Birth</div>
						<div class="evidenceDescription">The number of people in this cohort shown with respect to their year of birth.</div>
						<div class="evidenceVisualization" id="hist"></div>

						<div class="reportSectionHeading">Gender</div>
						<div class="evidenceDescription">The number of people in this cohort stratified by gender.</div>
						<div class="evidenceVisualization" id="gender"></div>

						<div class="reportSectionHeading">Race</div>
						<div class="evidenceDescription">The number of people in this cohort stratified by race.</div>
						<div class="evidenceVisualization" id="race"></div>

						<div class="reportSectionHeading">Ethnicity</div>
						<div class="evidenceDescription">The number of people in this cohort stratified by ethnicity.</div>
						<div class="evidenceVisualization" id="ethnicity"></div>
					</div>
				</div>

				<div id="reportCohortSpecific" data-bind="if: currentReport() == 'Cohort Specific' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Cohort Specific Report</div>
						<div class="reportSectionHeading">Prevalence by Month</div>
						<div class="evidenceVisualization" id="prevalenceByMonth"></div>
						<div class="evidenceDescription">help text here</div>

						<div class="reportSectionHeading">Cohort Start</div>
						<div class="evidenceVisualization" id="trellisLinePlot"></div>
						<div class="evidenceDescription">help text here</div>

						<div class="reportSectionHeading">Persons in Cohort from Start to End</div>
						<div class="evidenceDescription" style="width:30%;">help text here</div>
						<div class="evidenceVisualization" id="personinCohortFromStartToEnd"></div>

						<div class="reportSectionHeading">Number of Persons by Duration from Cohort Start to Cohort End</div>
						<div class="evidenceDescription" style="width:30%;">help text here</div>
						<div class="evidenceVisualization" id="personsByDurationFromStartToEnd"></div>

						<div class="reportSectionHeading">Distribution of Age at Cohort Start by Cohort Start Year</div>
						<div class="evidenceDescription" style="width:30%;">help text here</div>
						<div class="evidenceVisualization" id="distributionAgeCohortStartByCohortStartYear"></div>

						<div class="reportSectionHeading">Age at Index</div>
						<div class="evidenceDescription" style="width:30%;">help text here</div>
						<div class="evidenceVisualization" id="ageAtIndex"></div>

						<div class="reportSectionHeading">Distribution of Age at Cohort Start by Gender</div>
						<div class="evidenceDescription" style="width:30%;">help text here</div>
						<div class="evidenceVisualization" id="distributionAgeCohortStartByGender"></div>
					</div>
				</div>

				<div id="reportConditionsByIndex" data-bind="if: currentReport() == 'Conditions by Index' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Conditions by Index Report</div>
						<div class="reportSectionHeading">Condition Prevalence</div>

						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active" id="treemap-tab"><a href="#condition-treemap-panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#condition-table-panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="condition-treemap-panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>
								<div class="treemap_legend">Box Size: Prevalence, Color: Log of Relative Risk (Red to Green = Negative to Positive), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="condition-table-panel">
								<table id="condition_table" class="display treemap_table" type="condition">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>SOC</th>
											<th>HLGT</th>
											<th>HLT</th>
											<th>PT</th>
											<th>SNOMED</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Relative Risk per Person</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>
						<div data-bind="if:pageModel.activeReportDrilldown">
							<div id="conditionDrilldownScatterplotHeading" class="reportSectionHeading">
							</div>
							<div class="evidenceVisualization" id="conditionDrilldownScatterplot"></div>
						</div>
					</div>
				</div>

				<div id="reportDrugErasByIndex" data-bind="if: currentReport() == 'Drugs by Index' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Drugs by Index Report</div>
						<div class="reportSectionHeading">Drug Era Prevalence</div>

						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active" id="treemap-tab"><a href="#drugera-treemap-panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#drugera-table-panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="drugera-treemap-panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>
								<div class="treemap_legend">Box Size: Prevalence, Color: Log of Relative Risk (Red to Green = Negative to Positive), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="drugera-table-panel">
								<table id="drugera_table" class="display treemap_table" type="drug">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>ATC 1</th>
											<th>ATC 3</th>
											<th>ATC 5</th>
											<th>Ingredient</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Relative Risk per Person</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>
						<div data-bind="if:pageModel.activeReportDrilldown">
							<div id="drugDrilldownScatterplotHeading" class="reportSectionHeading">
							</div>
							<div class="evidenceVisualization" id="drugDrilldownScatterplot"></div>
						</div>
					</div>
				</div>

				<div id="reportConditionPeriods" data-bind="if: currentReport() == 'Observation Periods' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i>Observation Period Report</div>

						<div class="reportSectionHeading">Age at First Observation</div>
						<div class="evidenceDescription">The distribution of age at first observation in the cohort.</div>
						<div class="evidenceVisualization" id="ageatfirstobservation"></div>

						<div class="reportSectionHeading">Age by Gender</div>
						<div class="evidenceDescription">The distribution of age at first observation in the cohort stratified by gender.</div>
						<div class="evidenceVisualization" id="agebygender"></div>

						<div class="reportSectionHeading">Observation Length</div>
						<div class="evidenceDescription">Distribution of total observation time in cohort</div>
						<div class="evidenceVisualization" id="observationlength"></div>

						<div class="reportSectionHeading">Observation Length by Gender</div>
						<div class="evidenceDescription">Distribution of total observation time in cohort by gender</div>
						<div class="evidenceVisualization" id="opbygender"></div>

						<div class="reportSectionHeading">Cumulative Observation</div>
						<div class="evidenceDescription">Observation time in cohort by % of people in the cohort.</div>
						<div class="evidenceVisualization" id="cumulativeobservation"></div>

						<div class="reportSectionHeading">Observation Length by Age Decile</div>
						<div class="evidenceDescription">Observation time in cohort by age decile.</div>
						<div class="evidenceVisualization" id="opbyage"></div>

						<div class="reportSectionHeading">Perons with Continuous Observation by Year</div>
						<div class="evidenceDescription">Perons with Continuous Observation by Year.</div>
						<div class="evidenceVisualization" id="oppeoplebyyear"></div>

						<div class="reportSectionHeading">Observation Periods per Person</div>
						<div class="evidenceDescription">The count of observation periods per person</div>
						<div class="evidenceVisualization" id="opperperson"></div>

						<div class="reportSectionHeading">Persons With Continuous Observation By Month</div>
						<div class="evidenceDescription">Persons With Continuous Observation By Month</div>
						<div class="evidenceVisualization" id="oppeoplebymonthsingle"></div>

					</div>
				</div>

				<div id="reportConditionEras" data-bind="if: currentReport() == 'Condition Eras' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Condition Eras Report</div>
						<div class="reportSectionHeading">Condition Era Prevalence</div>

						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active"><a href="#conditionera-treemap-panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#conditionera-table-panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="conditionera-treemap-panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>
								<div class="treemap_legend">Box Size: Prevalence, Color: Length of Era (Light to Dark = Low to High), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="conditionera-table-panel">
								<table id="conditionera_table" class="display">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>SOC</th>
											<th>HLGT</th>
											<th>HLT</th>
											<th>PT</th>
											<th>SNOMED</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Length of Era</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>
						<div data-bind="if:pageModel.activeReportDrilldown">
							<div class="heading" id="conditionEraDrilldown"></div>
							<div class="reportSectionHeading">Condition Era Prevalence</div>
							<div class="evidenceVisualization" id="trellisLinePlot"></div>
							<div class="evidenceDescription">help text here</div>

							<div class="reportSectionHeading">Condition Era Prevalence by Month</div>
							<div class="evidenceVisualization" id="conditioneraPrevalenceByMonth"></div>
							<div class="evidenceDescription">help text here</div>

							<div class="reportSectionHeading">Age at First Diagnosis</div>
							<div class="evidenceDescription">help text here</div>
							<div class="evidenceVisualization" id="conditioneras_age_at_first_diagnosis"></div>

							<div class="reportSectionHeading">Length of Condition Era</div>
							<div class="evidenceDescription" style="width:30%;">help text here</div>
							<div class="evidenceVisualization" id="conditioneras_length_of_era"></div>
						</div>
					</div>
				</div>

				<div id="reportProceduresByIndex" data-bind="if: currentReport() == 'Procedures by Index' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Procedures by Index Report</div>
						<div class="reportSectionHeading">Procedure Prevalence</div>

						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active" id="treemap-tab"><a href="#procedure-treemap-panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#procedure-table-panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="procedure-treemap-panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>
								<div class="treemap_legend">Box Size: Prevalence, Color: Log of Relative Risk (Red to Green = Negative to Positive), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="procedure-table-panel">
								<table id="procedure_table" class="display treemap_table" type="procedure">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>Level 4</th>
											<th>Level 3</th>
											<th>Level 2</th>
											<th>Procedure</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Relative Risk per Person</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>
						<div data-bind="if:pageModel.activeReportDrilldown">
							<div id="procedureDrilldownScatterplotHeading" class="reportSectionHeading">
							</div>
							<div class="evidenceVisualization" id="procedureDrilldownScatterplot"></div>
						</div>
					</div>
				</div>

				<div id="reportCondition" data-bind="if: currentReport() == 'Condition' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Condition Report</div>
						<div class="reportSectionHeading">Condition Prevalence</div>

						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active" id="treemap-tab"><a href="#condition-treemap-panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#condition-table-panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="condition-treemap-panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>
								<div class="treemap_legend">Box Size: Prevalence, Color: Records per Person (Light to Dark = Low to High), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="condition-table-panel">
								<table id="condition_table" class="display">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>SOC</th>
											<th>HLGT</th>
											<th>HLT</th>
											<th>PT</th>
											<th>SNOMED</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Records per Person</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>
						<div data-bind="if:pageModel.activeReportDrilldown">
							<div class="heading" id="conditionDrilldown"></div>

							<div class="reportSectionHeading">Condition Prevalence</div>
							<div class="evidenceVisualization" id="trellisLinePlot"></div>
							<div class="evidenceDescription">Condition Prevalence</div>

							<div class="reportSectionHeading">Condition Prevalence by Month</div>
							<div class="evidenceVisualization" id="conditionPrevalenceByMonth"></div>
							<div class="evidenceDescription">Condition Prevalence by Month</div>

							<div class="reportSectionHeading">Condition Type</div>
							<div class="evidenceDescription">Condition Type</div>
							<div class="evidenceVisualization" id="conditionsByType"></div>

							<div class="reportSectionHeading">Age at First Diagnosis</div>
							<div class="evidenceVisualization" id="ageAtFirstDiagnosis"></div>
							<div class="evidenceDescription">Age at First Diagnosis</div>
						</div>
					</div>
				</div>

				<div id="reportDrugEras" data-bind="if: currentReport() == 'Drug Eras' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Drug Eras Report</div>
						<div class="reportSectionHeading">Drug Era Prevalence</div>

						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active"><a href="#drugera-treemap-panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#drugera-table-panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="drugera-treemap-panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>
								<div class="treemap_legend">Box Size: Prevalence, Color: Length of Era (Light to Dark = Low to High), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="drugera-table-panel">
								<table id="drugera_table" class="display">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>ATC 1</th>
											<th>ATC 3</th>
											<th>ATC 5</th>
											<th>Ingredient</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Length of Era</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>

						<div data-bind="if:pageModel.activeReportDrilldown">
							<div class="heading" id="drugeraDrilldown"></div>

							<div class="reportSectionHeading">Drug Era Prevalence</div>
							<div class="evidenceVisualization" id="trellisLinePlot"></div>
							<div class="evidenceDescription">Drug Era Prevalence</div>

							<div class="reportSectionHeading">Drug Era Prevalence by Month</div>
							<div class="evidenceVisualization" id="drugeraPrevalenceByMonth"></div>
							<div class="evidenceDescription">Monthly drug era prevalence</div>

							<div class="reportSectionHeading">Age at First Exposure by Gender</div>
							<div class="evidenceVisualization" id="drugeras_age_at_first_exposure"></div>
							<div class="evidenceDescription">Age at First Exposure by Gender</div>

							<div class="reportSectionHeading">Length of Era Distribution</div>
							<div class="evidenceVisualization" id="drugeras_length_of_era"></div>
							<div class="evidenceDescription">Length of Era Distribution</div>
						</div>
					</div>
				</div>

				<div id="reportDrugExposure" data-bind="if: currentReport() == 'Drug Exposure' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Drug Exposure Report</div>
						<div class="reportSectionHeading">Drug Exposure Prevalence</div>
						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active" id="treemap-tab"><a href="#drug_treemap_panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#drug_table_panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div class="tab-pane active" id="drug_treemap_panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>

								<div class="treemap_legend">Box Size: Prevalence, Color: Records per Person (Light to Dark = Low to High), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div class="tab-pane" id="drug_table_panel">
								<table id="drug_table" class="display">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>ATC 1</th>
											<th>ATC 3</th>
											<th>ATC 5</th>
											<th>Ingredient</th>
											<th>RxNorm</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Records per Person</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>
						<div data-bind="if:pageModel.activeReportDrilldown">
							<div class="heading" id="drugExposureDrilldown"></div>

							<div class="reportSectionHeading">Drug Exposure Prevalence</div>
							<div class="evidenceVisualization" id="trellisLinePlot"></div>
							<div class="evidenceDescription">Drug Exposure Prevalence</div>

							<div class="reportSectionHeading">Drug Exposure Prevalence by Month</div>
							<div class="evidenceVisualization" id="drugPrevalenceByMonth"></div>
							<div class="evidenceDescription">Drug Exposure Prevalence by Month</div>

							<div class="reportSectionHeading">Age at First Exposure</div>
							<div class="evidenceDescription">Age at First Exposure</div>
							<div class="evidenceVisualization" id="ageAtFirstExposure"></div>

							<div class="reportSectionHeading">Days Supply Distribution</div>
							<div class="evidenceDescription">Days Supply Distribution</div>
							<div class="evidenceVisualization" id="daysSupplyDistribution"></div>

							<div class="reportSectionHeading">Quantity Distribution</div>
							<div class="evidenceDescription">Quantity Distribution</div>
							<div class="evidenceVisualization" id="quantityDistribution"></div>

							<div class="reportSectionHeading">Refills Distribution</div>
							<div class="evidenceDescription">Refills Distribution</div>
							<div class="evidenceVisualization" id="refillsDistribution"></div>

							<div class="reportSectionHeading">Drugs by Type</div>
							<div class="evidenceDescription">Drugs by Type</div>
							<div class="evidenceVisualization" id="drugsByType"></div>
						</div>
					</div>
				</div>

				<div id="reportProcedure" data-bind="if: currentReport() == 'Procedure' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Procedure Report</div>
						<div class="reportSectionHeading">Procedure Prevalence</div>

						<ul class="nav nav-tabs" id="myTab" role="tablist">
							<li class="active"><a href="#procedure-treemap-panel" role="tab" data-toggle="tab">Treemap</a>
							</li>
							<li><a href="#procedure-table-panel" role="tab" data-toggle="tab">Table</a>
							</li>
						</ul>
						<div id='content' class="tab-content">
							<div class="tab-pane active" role="tabpanel" id="procedure-treemap-panel">
								<div id="treemap_container">
									<div class="treemap_zoomtarget"></div>
								</div>
								<div class="treemap_legend">Box Size: Prevalence, Color: Records per Person (Light to Dark = Low to High), Use Ctrl-Click to Zoom, Alt-Click to Reset Zoom</div>
							</div>
							<div class="tab-pane" role="tabpanel" id="procedure-table-panel">
								<table id="procedure_table" class="display">
									<thead>
										<tr>
											<th>Concept Id</th>
											<th>Level 4</th>
											<th>Level 3</th>
											<th>Level 2</th>
											<th>Procedure</th>
											<th>Person Count</th>
											<th>Prevalence</th>
											<th>Records per Person</th>
										</tr>
									</thead>
								</table>
							</div>
						</div>

						<div class="loader" data-bind="if:pageModel.loadingReportDrilldown">
							<i class="fa fa-refresh fa-spin"></i> Loading Drilldown...
						</div>
						<div data-bind="if:pageModel.activeReportDrilldown">
							<div class="heading" id="procedureDrilldown"></div>

							<div class="reportSectionHeading">Procedure Prevalence</div>
							<div class="evidenceVisualization" id="trellisLinePlot"></div>
							<div class="evidenceDescription">Procedure Prevalence</div>

							<div class="reportSectionHeading">Procedure Prevalence by Month</div>
							<div class="evidenceVisualization" id="procedurePrevalenceByMonth"></div>
							<div class="evidenceDescription">Procedure Prevalence by Month</div>

							<div class="reportSectionHeading">Procedures by Type</div>
							<div class="evidenceDescription">Procedures by Type</div>
							<div class="evidenceVisualization" id="proceduresByType"></div>

							<div class="reportSectionHeading">Age at First Occurrence</div>
							<div style="width:30%" class="evidenceDescription">Age at First Occurrence</div>
							<div class="evidenceVisualization" id="ageAtFirstOccurrence"></div>
						</div>
					</div>
				</div>

				<div id="reportDeath" data-bind="if: currentReport() == 'Death' && !loadingReport()">
					<div class="pad-10 report">
						<div class="reportHeading"><i class="fa fa-area-chart"></i> Death Report</div>

						<div class="reportSectionHeading">Death Prevalence by Age, Gender, Year</div>
						<div class="evidenceVisualization" id="trellisLinePlot"></div>

						<div class="reportSectionHeading">Death Prevalence by Month</div>
						<div class="evidenceVisualization" id="deathPrevalenceByMonth"></div>

						<div class="reportSectionHeading">Death by Type</div>
						<div class="evidenceDescription">Death by Type</div>
						<div class="evidenceVisualization" id="deathByType"></div>

						<div class="reportSectionHeading">Age at Death</div>
						<div style="width:30%" class="evidenceDescription">Age at Death</div>
						<div class="evidenceVisualization" id="ageAtDeath"></div>
					</div>
				</div>
			</div>
			<!-- reports container -->

			<div data-bind="if: currentView() == 'cohortdefinition'">
				<div class="wrapperTitle" data-bind="text:currentCohortDefinition().name">
				</div>

				<div id="wrapperCohortDefinition">
					<div class="heading">Cohort Definition</div>
					<div class="cohortDescription" data-bind="text:currentCohortDefinition().description"></div>

					<div class="heading">Cohort Generation Status</div>
					<table class="configureSourceTable">
						<thead>
							<th>Source Name</th>
							<th class="centered">Generated</th>
							<th>Generation Status</th>
							<th>Distinct People</th>
							<th>Generated</th>
							<th>Generation Duration</th>
						</thead>
						<tbody data-bind="foreach:cohortDefinitionSourceInfo">
							<tr>
								<td data-bind="text:name"></td>
								<td class="statusIndicator">
									<div class="fa" data-bind="css: { 'fa-check-circle' : isValid, 'fa-exclamation-circle' : !isValid }"></div>
								</td>
								<td class="rightaligned">
									<div data-bind="text: status"></div>
								</td>
								<td class="rightaligned">
									<div><span data-bind="html: distinctPeople"></span>
									</div>
								</td>
								<td class="rightaligned">
									<div data-bind="text: startTime"></div>
								</td>
								<td class="rightaligned">
									<div data-bind="text: executionDuration"></div>
								</td>
							</tr>
						</tbody>
					</table>

					<div class="heading">Cohort Analysis Status</div>

					<table id="analysisStatus">
						<thead>
							<th>Analysis Type</th>
							<!-- ko foreach: pageModel.services()[0].sources.filter(hasCDM) -->
							<th data-bind="text:sourceName"></th>
							<!-- /ko -->
						</thead>
						<tbody>
							<!-- ko foreach:cohortAnalyses -->
							<tr>
								<td data-bind="text:name"></td>
								<!-- ko foreach: pageModel.services()[0].sources.filter(hasCDM) -->
								<td class="statusIndicator">
									<!-- ko if:pageModel.sourceAnalysesStatus[sourceKey]().ready -->
									<i class="fa" data-bind="css: { 'fa-check-circle' : pageModel.sourceAnalysesStatus[sourceKey]()[$parent.name] > 0, 'fa-exclamation-triangle' : pageModel.sourceAnalysesStatus[sourceKey]()[$parent.name] == 0 }"></i>
									<input data-bind="attr: { name : sourceKey, value : $parent.name }" type="checkbox">
									<!-- /ko -->
									<!-- ko if:pageModel.sourceAnalysesStatus[sourceKey]().checking -->
									<i class="fa fa-refresh fa-spin"></i>
									<!-- /ko -->
									<!-- ko if:!pageModel.sourceAnalysesStatus[sourceKey]().checking && !pageModel.sourceAnalysesStatus[sourceKey]().ready -->
									<i class="fa fa-exclamation-circle"></i>
									<!-- /ko -->
								</td>
								<!-- /ko -->
							</tr>
							<!-- /ko -->
							<tr>
								<td style="border-bottom:0px;"></td>
								<!-- ko foreach: pageModel.services()[0].sources.filter(hasCDM) -->
								<td style="border-bottom:0px;padding:5px;" class="statusIndicator">
									<!-- ko if:pageModel.sourceAnalysesStatus[sourceKey]().ready -->
									<input data-bind="click:generateAnalyses" type="button" value="Generate">
									<!-- /ko -->
								</td>
								<!-- /ko -->
							</tr>
						</tbody>
					</table>

				</div>
			</div>

			<div data-bind="if: currentView() == 'cohortdefinitions'">
				<div class="wrapperTitle">
					<i class="fa fa-language"></i> Cohort Definitions
				</div>

				<div id="wrapperCohort">
					<table width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
            data: pageModel.cohortDefinitions(),
            options: {
						dom: 'Clfiprt',
						language: {
							search : 'Filter Cohort Definitions:'
						},
						colVis: {
							buttonText: 'Change Columns',
							align: 'right',
							overlayFade: 0,
							showAll: 'Show All Columns',
							restore: 'Reset Columns'
						},
						lengthMenu: [[25, 50, 100, -1], [25, 50, 100,'All']],
						orderClasses: false,
						deferRender: true,
						autoWidth: false,
						ordering: true,
						order: [[ 2, 'asc' ]],
						columns: [
								{ title: 'Id', data: 'id' },
								{ title: 'Name', render: renderCohortDefinitionLink },
								{ title: 'Description', data: 'description'},
								{ title: 'Expression Type', data: 'expressionType', visible: false },
								{ title: 'Created', data: 'createdDate'},
								{ title: 'Last Modified', data: 'modifiedDate', visible: false}
						]
				}
        }">
					</table>
				</div>
			</div>

			<div data-bind="if: currentView() == 'configure'">
				<div class="wrapperTitle">
					Configure
				</div>

				<div id="wrapperConfigure">
					<div data-bind="if:appInitializationFailed">
						<div class="heading"><i class="fa fa-exclamation-circle"></i> Application Initialization Errors Encountered: Please notify your administrator about this message.</div>
						<div data-bind="foreach:initializationErrors">
							<div class="error" data-bind="text:$data"></div>
						</div>
					</div>
					<div class="heading">Configured Services</div>
					<div data-bind="foreach:pageModel.services">
						<div data-bind="if:available==true">
							<div class="serviceStatus serviceAvailable fa fa-check-circle"></div>
						</div>

						<div data-bind="if:available==false">
							<div class="serviceStatus serviceUnavailable fa fa-exclamation-circle"></div>
						</div>

						<span class="serviceName" data-bind="text:name"></span> (
						<span class="serviceUrl" data-bind="text:url"></span>)
						<div data-bind="if:available==false">
							<div class="error" data-bind="text:thrownError"></div>
							<div class="error" data-bind="text:xhr.statusText"></div>
						</div>
						<div data-bind="foreach:initializationErrors">
							<div class="error" data-bind="text:$data"></div>
						</div>
						<table data-bind="if:$data.sources.length > 0" class="configureSourceTable">
							<thead>
								<th></th>
								<th>Source Name</th>
								<th>Vocabulary Version</th>
								<th>Dialect</th>
								<th class="centered">Vocabulary</th>
								<th class="centered">Evidence</th>
								<th class="centered">Density</th>
								<th class="centered">Incidence</th>
							</thead>
							<tbody data-bind="foreach:$data.sources">
								<tr>
									<td><i class="fa" data-bind="if:!initialized, attr: { title : error }, css: { 'fa-check-circle': initialized, 'fa-exclamation-circle': !initialized }"></i>
										<span data-bind="text:error"></span>
									</td>
									<td data-bind="text:sourceName"></td>
									<td data-bind="text:version"></td>
									<td data-bind="text:sourceDialect"></td>
									<td class="configureRadio">
										<input type="radio" name="radioSource" data-bind="disable:!hasVocabulary, checkedValue:vocabularyUrl, checked:pageModel.vocabularyUrl">
									</td>
									<td class="configureRadio">
										<input type="radio" name="radioEvidence" data-bind="disable:!hasEvidence, checkedValue:evidenceUrl, checked:pageModel.evidenceUrl">
									</td>
									<td class="configureRadio">
										<input type="radio" name="radioDensity" data-bind="disable:!hasResults, checkedValue:resultsUrl, checked:pageModel.resultsUrl">
									</td>
									<td class="configureCheckbox">
										<input type="checkbox" name="checkResults" data-bind="disable:!hasResults, checked:hasResults">
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>

			<div data-bind="if: currentView() == 'import'">
				<div class="wrapperTitle">
					Import
				</div>

				<ul class="nav nav-tabs">
					<li role="presentation" data-bind="click: function() {pageModel.currentImportMode('identifiers');}, attr: {class: currentImportMode() == 'identifiers' ? 'active' : ''}"><a>Concept Identifiers</a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentImportMode('conceptset');}, attr: {class: currentImportMode() == 'conceptset' ? 'active' : ''}"><a>Concept Set</a>
					</li>
				</ul>
				<div id="wrapperImport">
					<div id="wrapperImportConceptIdentifiers" class="paddedWrapper form-group" data-bind="if:pageModel.currentImportMode() == 'identifiers'">
						<div class="heading">Concept Identifiers</div>
						<textarea class="form-control" rows="5" id="textImportConceptIdentifiers" data-bind="if:pageModel.currentImportMode() == 'conceptset'"></textarea>
						<button type="button" onclick="importConceptIdentifiers()" class="btn btn-sm btn-primary">Import Concept Identifiers</button>

						<div class="heading">Imported Concepts</div>
						<table width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
            data: pageModel.importedConcepts(),
            options: {
							dom: 'Clfiprt',
												colVis: {
													buttonText: 'Change Columns',
													align: 'right',
													overlayFade: 0,
													showAll: 'Show All Columns',
													restore: 'Reset Columns'
												},
												rowCallback: contextSensitiveLinkColor,
												lengthMenu: [[25, 50, 100, -1], [25, 50, 100,'All']],
												orderClasses: false,
												deferRender: true,
												autoWidth: false,
												ordering: true,
												order: [[ 2, 'asc' ]],
                        columns: [
														{ title: '', render: renderConceptSelector, orderable:false, searchable:false},
														{ title: 'Concept Id', data: 'CONCEPT_ID', visible: false},
														{ title: 'Concept Code', data: 'CONCEPT_CODE', visible: false},
                            { title: 'Concept Name', data: 'CONCEPT_NAME', render: renderLink},
                            { title: 'Class', data: 'CONCEPT_CLASS_ID' },
														{ title: 'Standard Concept Caption', data: 'STANDARD_CONCEPT_CAPTION', visible: false},
														{ title: 'Standard Concept Code', data: 'STANDARD_CONCEPT', visible: false},
                            { title: 'Domain', data: 'DOMAIN_ID' },
														{ title: 'Vocabulary', data: 'VOCABULARY_ID' }
                        ]
                    }
        }">
						</table>

						<div class="linkLegend">
							<div class="linkLegendItem">
								<div class="swatch standard">
								</div>
								<div class="linkLegendTitle">Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch nonStandard">
								</div>
								<div class="linkLegendTitle">Non-Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch classification">
								</div>
								<div class="linkLegendTitle">Classification</div>
							</div>
						</div>
					</div>

					<div id="wrapperImportConceptSet" class="paddedWrapper form-group" data-bind="if:pageModel.currentImportMode() == 'conceptset'">
						<div class="heading">Concept Set Expression JSON</div>
						<textarea class="form-control" rows="5" id="textImportConceptSet"></textarea>
						<button type="button" onclick="importConceptSetExpression()" class="btn btn-sm btn-primary">Import Concept Set Expression</button>

						<div class="heading">Imported Concept Set Expression</div>
						<table class="conceptSetTable stripe compact hover" cellspacing="0" width="100%" data-bind="dataTable:{
            data: pageModel.selectedConcepts(),
            options: {
							dom: 'Clfiprt',
							colVis: {
								buttonText: 'Change Columns',
								align: 'right',
								overlayFade: 0,
								showAll: 'Show All Columns',
								restore: 'Reset Columns'
							},
							rowCallback: contextSensitiveLinkColor,
							lengthMenu: [[25, 50, 100, -1], [25, 50, 100,'All']],
							orderClasses: false,
							deferRender: true,
							autoWidth: false,
							order: [[3, 'desc']],
              columns: [
									{ title: '<li class=\'fa fa-shopping-cart\'></li>', render: renderConceptSetItemSelector, orderable:false, searchable:false},
									{ title: 'Concept Id', data: 'concept.CONCEPT_ID', visible:false},
									{ title: 'Concept Code', data: 'concept.CONCEPT_CODE'},
                  { title: 'Concept Name', render: renderBoundLink},
                  { title: 'Domain', data: 'concept.DOMAIN_ID' },
									{ title: 'Standard Concept Code', data: 'concept.STANDARD_CONCEPT', visible:false },
									{ title: 'Standard Concept Caption', data: 'concept.STANDARD_CONCEPT_CAPTION' },
									{ title: 'Exclude', class:'text-center', orderable:false,render: function() { return renderCheckbox('isExcluded');} },
									{ title: 'Descendants', class:'text-center', orderable:false,render: function() { return renderCheckbox('includeDescendants');} },
									{ title: 'Mapped', class:'text-center', orderable:false,render: function() { return renderCheckbox('includeMapped');} }
              ]
           }
        }">
						</table>

						<div class="linkLegend">
							<div class="linkLegendItem">
								<div class="swatch standard">
								</div>
								<div class="linkLegendTitle">Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch nonStandard">
								</div>
								<div class="linkLegendTitle">Non-Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch classification">
								</div>
								<div class="linkLegendTitle">Classification</div>
							</div>
						</div>
					</div>
				</div>

			</div>

			<div data-bind="if: currentView() == 'conceptset'">
				<div class="wrapperTitle">
					Concept Set
				</div>

				<ul class="nav nav-tabs">
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptSetMode('details');}, attr: {class: currentConceptSetMode() == 'details' ? 'active' : ''}"><a>Concept Set Expression</a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptSetMode('included');}, attr: {class: currentConceptSetMode() == 'included' ? 'active' : ''}">
						<a>Included Concepts
							<span class="badge" data-bind="if: !pageModel.resolvingConceptSetExpression()"><span data-bind="text:pageModel.conceptSetInclusionCount()"></span></span>
							<span class="badge" data-bind="if: pageModel.resolvingConceptSetExpression();"><i class="fa fa-refresh fa-spin"></i></span></a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptSetMode('analysis');}, attr: {class: currentConceptSetMode() == 'analysis' ? 'active disabled' : 'disabled'}"><a>Analysis</a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptSetMode('export');}, attr: {class: currentConceptSetMode() == 'export' ? 'active disabled' : 'disabled'}"><a>Export</a>
					</li>
				</ul>
				<div id="wrapperConceptSetAnalysis" data-bind="if: currentConceptSetMode() == 'analysis'">
					<div id="wrapperAnalysisVisualization"></div>
				</div>
				<div id="wrapperConceptSetIncluded" data-bind="if: currentConceptSetMode() == 'included'">
					<div id="wrapperIncludedTable">
						<table width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
            data: pageModel.includedConcepts(),
            options: {
							dom: 'Clfiprt',
								colVis: {
									buttonText: 'Change Columns',
									align: 'right',
									overlayFade: 0,
									showAll: 'Show All Columns',
									restore: 'Reset Columns'
								},
								rowCallback: contextSensitiveLinkColor,
								lengthMenu: [[20, 50, 100, -1], [20, 50, 100,'All']],
								orderClasses: false,
								deferRender: true,
								autoWidth: false,
								ordering: true,
								order: [[ 2, 'asc' ]],
								columns: [
										{ title: '', render: renderConceptSelector, orderable:false, searchable:false},
										{ title: 'Concept Id', data: 'CONCEPT_ID', visible: false},
										{ title: 'Concept Code', data: 'CONCEPT_CODE', visible: false},
										{ title: 'Concept Name', data: 'CONCEPT_NAME', render: renderLink},
										{ title: 'Class', data: 'CONCEPT_CLASS_ID' },
										{ title: 'Standard Concept Caption', data: 'STANDARD_CONCEPT_CAPTION', visible: false},
										{ title: 'Standard Concept Code', data: 'STANDARD_CONCEPT', visible: false},
										{ title: 'Domain', data: 'DOMAIN_ID' },
										{ title: 'Vocabulary', data: 'VOCABULARY_ID' }
								]
						}
        }">
						</table>

						<div class="linkLegend">
							<div class="linkLegendItem">
								<div class="swatch standard">
								</div>
								<div class="linkLegendTitle">Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch nonStandard">
								</div>
								<div class="linkLegendTitle">Non-Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch classification">
								</div>
								<div class="linkLegendTitle">Classification</div>
							</div>
						</div>
					</div>
				</div>
				<div id="wrapperConceptSet" data-bind="if: currentConceptSetMode() == 'details'">
					<table class="conceptSetTable stripe compact hover" cellspacing="0" width="100%" data-bind="dataTable:{
            data: pageModel.selectedConcepts(),
            options: {
							dom: 'Clfiprt',
							colVis: {
								buttonText: 'Change Columns',
								align: 'right',
								overlayFade: 0,
								showAll: 'Show All Columns',
								restore: 'Reset Columns'
							},
							rowCallback: contextSensitiveLinkColor,
							lengthMenu: [[25, 50, 100, -1], [25, 50, 100,'All']],
							orderClasses: false,
							deferRender: true,
							autoWidth: false,
							order: [[3, 'desc']],
              columns: [
									{ title: '<li class=\'fa fa-shopping-cart\'></li>', render: renderConceptSetItemSelector, orderable:false, searchable:false},
									{ title: 'Concept Id', data: 'concept.CONCEPT_ID', visible:false},
									{ title: 'Concept Code', data: 'concept.CONCEPT_CODE'},
                  { title: 'Concept Name', render: renderBoundLink},
                  { title: 'Domain', data: 'concept.DOMAIN_ID' },
									{ title: 'Standard Concept Code', data: 'concept.STANDARD_CONCEPT', visible:false },
									{ title: 'Standard Concept Caption', data: 'concept.STANDARD_CONCEPT_CAPTION' },
									{ title: 'Exclude', class:'text-center', orderable:false,render: function() { return renderCheckbox('isExcluded');} },
									{ title: 'Descendants', class:'text-center', orderable:false,render: function() { return renderCheckbox('includeDescendants');} },
									{ title: 'Mapped', class:'text-center', orderable:false,render: function() { return renderCheckbox('includeMapped');} }
              ]
           }
        }">
					</table>
					<div class="linkLegend">
						<div class="linkLegendItem">
							<div class="swatch standard">
							</div>
							<div class="linkLegendTitle">Standard</div>
						</div>
						<div class="linkLegendItem">
							<div class="swatch nonStandard">
							</div>
							<div class="linkLegendTitle">Non-Standard</div>
						</div>
						<div class="linkLegendItem">
							<div class="swatch classification">
							</div>
							<div class="linkLegendTitle">Classification</div>
						</div>
					</div>
					<button type="button" onclick="clearConceptSet()" class="btn btn-sm btn-primary selectAllButton">Clear Concept Set</button>
					<div id="wrapperConceptSetWarnings" data-bind="visible: selectedConceptsWarnings().length > 0">
						<div class="heading">Concept Set Warnings</div>
						<table data-bind="foreach:selectedConceptsWarnings">
							<tr class="conceptWarning">
								<td><i class="fa fa-exclamation-triangle"></i>
								</td>
								<td><span class="conceptWarningText" data-bind="text:$data"></span>
								</td>
							</tr>
						</table>
					</div>
				</div>

				<div id="wrapperConceptSetExport" data-bind="if: currentConceptSetMode() == 'export'">
					<div class="heading">Concept Set Expression JSON</div>
					<pre data-bind="html: currentConceptSetExpressionJson"></pre>
					<div class="heading">Concept Identifer List</div>
					<pre data-bind="html: currentConceptIdentifierList"></pre>
					<div class="heading">Included Concept Identifer List</div>
					<pre data-bind="html: currentIncludedConceptIdentifierList"></pre>
				</div>

			</div>

			<div id="wrapperConcept" data-bind="if: currentConcept() && currentView() == 'concept'">
				<div class="wrapperTitle" data-bind="with:currentConcept">
					<span data-bind="css: {invalid: STANDARD_CONCEPT!='S'}, html:renderCurrentConceptSelector() + ' ' + CONCEPT_NAME"></span>
				</div>

				<ul class="nav nav-tabs">
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptMode('details');}, attr: {class: currentConceptMode() == 'details' ? 'active' : ''}"><a>Concept Details</a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptMode('related');}, attr: {class: currentConceptMode() == 'related' ? 'active' : ''}">
						<a><span data-bind="if:pageModel.loadingRelated();">
							<i class="fa fa-refresh fa-spin"></i>
						</span>Related Concepts</a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptMode('hierarchy');}, attr: {class: currentConceptMode() == 'hierarchy' ? 'active' : ''}">
						<a><span data-bind="if:pageModel.loadingRelated();">
							<i class="fa fa-refresh fa-spin"></i>
						</span>Hierarchy Viewer</a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptMode('evidence');}, attr: {class: currentConceptMode() == 'evidence' ? 'active disabled' : 'disabled'}">
						<a>
							<span data-bind="if:pageModel.loadingEvidence();">
							<i class="fa fa-refresh fa-spin"></i>
						</span>Evidence</a>
					</li>
					<li role="presentation" data-bind="click: function() {pageModel.currentConceptMode('data');}, attr: {class: currentConceptMode() == 'data' ? 'active disabled' : 'disabled'}"><a>Concept Incidence</a>
					</li>
				</ul>

				<div id="wrapperConceptHierarchy" data-bind="if:pageModel.currentConceptMode() == 'hierarchy' && !pageModel.loadingRelated()">
					<div id="wrapperParents">
						<table width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
								data: pageModel.metarchy.parents(),
								options: {
									dom: 't',
									language: {
										search: 'Filter Broader Concepts: '
									},
									rowCallback: contextSensitiveLinkColor,
									lengthMenu: [[-1], ['All']],
									orderClasses: false,
									ordering: true,
									order: [[ 2, 'asc' ]],
									columns: [
											{ title: '', render: renderConceptSelector, orderable:false, searchable:false},
											{ title: 'Concept Id', data: 'CONCEPT_ID', visible: false},
											{ title: 'Concept Code', data: 'CONCEPT_CODE', visible: false},
											{ title: 'Concept Name', data: 'CONCEPT_NAME', render: renderLink, width: '50%'},
											{ title: 'Class', data: 'CONCEPT_CLASS_ID' },
											{ title: 'Standard Concept Caption', data: 'STANDARD_CONCEPT_CAPTION', visible: false},
											{ title: 'Standard Concept Code', data: 'STANDARD_CONCEPT', visible: false},
											{ title: 'Domain', data: 'DOMAIN_ID' },
											{ title: 'Vocabulary', data: 'VOCABULARY_ID', width: '100px' }
									]
							}
						}">
						</table>
					</div>
					<div id="wrapperHierarchyAnchor" data-bind="text:pageModel.currentConcept().CONCEPT_NAME">
					</div>
					<div id="wrapperChildren" data-bind="with:metarchy">
						<table width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
								data: pageModel.metarchy.children(),
								language: {
									search: 'Filter Specific Concepts: '
								},
								options: {
									dom: 't',
									rowCallback: contextSensitiveLinkColor,
									lengthMenu: [[-1], ['All']],
									orderClasses: false,
									ordering: true,
									order: [[ 2, 'asc' ]],
									columns: [
											{ title: '', render: renderConceptSelector, orderable:false, searchable:false},
											{ title: 'Concept Id', data: 'CONCEPT_ID', visible: false},
											{ title: 'Concept Code', data: 'CONCEPT_CODE', visible: false},
											{ title: 'Concept Name', data: 'CONCEPT_NAME', render: renderLink, width: '50%'},
											{ title: 'Class', data: 'CONCEPT_CLASS_ID' },
											{ title: 'Standard Concept Caption', data: 'STANDARD_CONCEPT_CAPTION', visible: false},
											{ title: 'Standard Concept Code', data: 'STANDARD_CONCEPT', visible: false},
											{ title: 'Domain', data: 'DOMAIN_ID' },
											{ title: 'Vocabulary', data: 'VOCABULARY_ID', width: '100px' }
									]
							}
						}">
						</table>
					</div>
				</div>

				<div id="wrapperConceptEvidence" data-bind="if:pageModel.currentConceptMode() == 'evidence' && !pageModel.loadingEvidence()">

					<div class="heading">Evidence Scatter</div>
					<div style="background-color:#eee;padding:5px;">
						<div id="conceptEvidenceScatter"></div>
					</div>

					<div class="heading">Evidence Records</div>
					<table width="100%" class="stripe compact hover" cellspacing="0" data-bind="dataTable:{
            data: pageModel.evidence(),
            options: {
							dom: 'Clfiprt',
							colVis: {
								buttonText: 'Change Columns',
								align: 'right',
								overlayFade: 0,
								showAll: 'Show All Columns',
								restore: 'Reset Columns'
							},
							lengthMenu: [[20, 50, 100, -1], [20, 50, 100,'All']],
							deferRender: true,
							orderClasses: false,
							autoWidth: false,
							ordering: true,
							order: [[ 2, 'asc' ]],
							columns: [
									{ title: 'Evidence Type', data: 'evidenceType'},
									{ title: 'Link Out', data: 'linkout'},
									{ title: 'Drug Name', data: 'drugName'},
									{ title: 'Condition Name', data: 'conditionName'},
									{ title: 'Value', data: 'value' }
							]
					}
        }">
					</table>

				</div>

				<div id="wrapperConceptDetails" data-bind="if:pageModel.currentConceptMode() == 'details'">
					<table data-bind="with: currentConcept">
						<thead>
							<tr>
								<th>Property</th>
								<th>Value</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Concept Name</td>
								<td data-bind="text:CONCEPT_NAME"></td>
							</tr>
							<tr>
								<td>Domain Id</td>
								<td data-bind="text:DOMAIN_ID"></td>
							</tr>
							<tr>
								<td>Concept Class Id</td>
								<td data-bind="text:CONCEPT_CLASS_ID"></td>
							</tr>
							<tr>
								<td>Vocabulary Id</td>
								<td data-bind="text:VOCABULARY_ID"></td>
							</tr>
							<tr>
								<td>Concept Id</td>
								<td data-bind="text:CONCEPT_ID"></td>
							</tr>
							<tr>
								<td>Concept Code</td>
								<td data-bind="text:CONCEPT_CODE"></td>
							</tr>
							<tr>
								<td>Invalid Reason</td>
								<td data-bind="text:INVALID_REASON_CAPTION, attr: { class: INVALID_REASON_CAPTION == 'Valid' ? '' : 'invalid'}"></td>
							</tr>
							<tr>
								<td>Standard Concept</td>
								<td data-bind="text:STANDARD_CONCEPT_CAPTION, attr: { class: STANDARD_CONCEPT_CAPTION == 'Standard' ? '' : 'invalid'}"></td>
							</tr>
						</tbody>
					</table>
				</div>

				<div id="wrapperRelatedConcepts" data-bind="if: pageModel.currentConceptMode() == 'related' && !pageModel.loadingRelated()">
					<div id="wrapperRelatedConceptsFilter" class="feFilter" data-bind="with: feRelated">
						<div data-bind="foreach:Facets">
							<div class="facetName" data-bind="text:caption"></div>
							<div class="facetScrollBox" data-bind="foreach:Members">
								<div class="facetMemberName" data-bind="attr: {id: $parentContext.$index() + '-' + $index()}, click: function() { pageModel.updateRelatedFilters(); }, css : {selected: Selected}, text:Name + ' (' + ActiveCount + ')'">
								</div>
							</div>
						</div>
					</div>

					<div id="wrapperRelatedConceptsTable">
						<table width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
            data: pageModel.relatedConcepts(),
						language: {
							search: 'Filter: '
						},
            options: {
							dom: 'Clfiprt',
							colVis: {
								buttonText: 'Change Columns',
								align: 'right',
								overlayFade: 0,
								showAll: 'Show All Columns',
								restore: 'Reset Columns'
							},
							rowCallback: contextSensitiveLinkColor,
							lengthMenu: [[20, 50, 100, -1], [20, 50, 100,'All']],
							orderClasses: false,
							deferRender: true,
							autoWidth: false,
							ordering: true,
							order: [[ 2, 'asc' ]],
							columns: [
									{ title: '<li onclick=\'selectAllRelated();\' class=\'fa fa-shopping-cart\'></li>', render: renderConceptSelector, orderable:false, searchable:false},
									{ title: 'Concept Id', data: 'CONCEPT_ID', visible: false},
									{ title: 'Concept Code', data: 'CONCEPT_CODE', visible: false},
									{ title: 'Concept Name', data: 'CONCEPT_NAME', render: renderLink},
									{ title: 'Class', data: 'CONCEPT_CLASS_ID' },
									{ title: 'Standard Concept Caption', data: 'STANDARD_CONCEPT_CAPTION', visible: false},
									{ title: 'Standard Concept Code', data: 'STANDARD_CONCEPT', visible: false},
									{ title: 'Domain', data: 'DOMAIN_ID' },
									{ title: 'Vocabulary', data: 'VOCABULARY_ID' }
							]
					}
        }">
						</table>
						<div class="linkLegend">
							<div class="linkLegendItem">
								<div class="swatch standard">
								</div>
								<div class="linkLegendTitle">Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch nonStandard">
								</div>
								<div class="linkLegendTitle">Non-Standard</div>
							</div>
							<div class="linkLegendItem">
								<div class="swatch classification">
								</div>
								<div class="linkLegendTitle">Classification</div>
							</div>
						</div>
						<button type="button" onclick="selectAllRelated()" class="btn btn-sm btn-primary selectAllButton">Select All Related</button>
					</div>
				</div>
			</div>

			<div id="wrapperSearch" data-bind="if: currentView() == 'search'">
				<div class="wrapperTitle"><i class="fa fa-search"></i> Vocabulary Search</div>
				<div class="paddedWrapper">
					<input id="querytext" placeholder="type your search here" class="form-control" type="text" data-bind="event: { keyup: checkExecuteSearch}" />

					<div id="helpMinimumQueryLength" class="modal fade">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<p>Search string must be at least 3 characters long</p>
								</div>
							</div>
						</div>
					</div>

					<div id="modalNoSearchResults" class="modal fade">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<p>Your search had no results.</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div id="wrapperSearchResults" data-bind="if: currentView() == 'searchResults'">
				<div>
					<div class="wrapperTitle" data-bind="text: 'Search Results for ' + decodeURI(pageModel.currentSearch())"></div>
				</div>
				<div style="position:relative;">
					<div id="wrapperSearchResultsFilter" class="feFilter" data-bind="with: feSearch">
						<div data-bind="foreach:Facets">
							<div class="facetName" data-bind="text:caption"></div>
							<div class="facetScrollBox" data-bind="foreach:Members">
								<div class="facetMemberName" data-bind="attr: {id: $parentContext.$index() + '-' + $index()}, click: function() { pageModel.updateSearchFilters(); }, css : {selected: Selected}, text:Name + ' (' + ActiveCount + ')'">
								</div>
							</div>
						</div>
					</div>
				</div>

				<div id="wrapperSearchResultsTable">
					<table id="tableSearchResults" width="100%" class="conceptTable stripe compact hover" cellspacing="0" data-bind="dataTable:{
            data: pageModel.searchResultsConcepts(),
            options: {
							dom: 'Clfiprt',
							language: {
								search: 'Filter: '
							},
							rowCallback: contextSensitiveLinkColor,
							lengthMenu: [[20, 50, 100, -1], [20, 50, 100,'All']],
							orderClasses: false,
							ordering: true,
							order: [[ 2, 'asc' ]],
							columns: [
									{ title: '', render: renderConceptSelector, orderable:false, searchable:false},
									{ title: 'Concept Id', data: 'CONCEPT_ID', visible: false},
									{ title: 'Concept Code', data: 'CONCEPT_CODE', visible: false},
									{ title: 'Concept Name', data: 'CONCEPT_NAME', render: renderLink, width: '50%'},
									{ title: 'Class', data: 'CONCEPT_CLASS_ID' },
									{ title: 'Standard Concept Caption', data: 'STANDARD_CONCEPT_CAPTION', visible: false},
									{ title: 'Standard Concept Code', data: 'STANDARD_CONCEPT', visible: false},
									{ title: 'Data Density', data: 'DENSITY', className:'numeric'},
									{ title: 'Domain', data: 'DOMAIN_ID' },
									{ title: 'Vocabulary', data: 'VOCABULARY_ID', width: '100px' }
							]
					}
        }">
					</table>
					<div class="linkLegend">
						<div class="linkLegendItem">
							<div class="swatch standard">
							</div>
							<div class="linkLegendTitle">Standard</div>
						</div>
						<div class="linkLegendItem">
							<div class="swatch nonStandard">
							</div>
							<div class="linkLegendTitle">Non-Standard</div>
						</div>
						<div class="linkLegendItem">
							<div class="swatch classification">
							</div>
							<div class="linkLegendTitle">Classification</div>
						</div>
					</div>
					<button type="button" onclick="selectAllSearchResults()" class="btn btn-sm btn-primary selectAllButton">Select All Search Results</button>
				</div>
			</div>

		</div>
</body>

</html>
